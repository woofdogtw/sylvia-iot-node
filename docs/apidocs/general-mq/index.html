<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3> </h3>










    




    <section>
        <article><h1>general-mq</h1>
<p><a href="https://www.npmjs.com/package/general-mq"><img src="https://img.shields.io/npm/v/general-mq.svg?logo=npm" alt="npm"></a>
<a href="https://woofdogtw.github.io/sylvia-iot-node/apidocs/general-mq/"><img src="https://img.shields.io/badge/docs-ok.svg" alt="Documentation"></a>
<img src="https://github.com/woofdogtw/sylvia-iot-node/actions/workflows/build-test.yaml/badge.svg" alt="CI">
<a href="https://woofdogtw.github.io/sylvia-iot-node/coverage/general-mq/"><img src="https://raw.githubusercontent.com/woofdogtw/sylvia-iot-node/gh-pages/docs/coverage/general-mq/badge.svg" alt="Coverage"></a>
<a href="LICENSE"><img src="https://img.shields.io/badge/license-MIT-blue.svg" alt="License"></a></p>
<blockquote>
<p>This is the Node.js implementation (the original project is <a href="https://github.com/woofdogtw/sylvia-iot-core/tree/main/general-mq"><strong>here</strong></a>).</p>
</blockquote>
<p>General purposed interfaces for message queues. Now we provide the following implementations:</p>
<ul>
<li>AMQP 0-9-1</li>
<li>MQTT</li>
</ul>
<p>By using these classes, you can configure queues with the following properties:</p>
<ul>
<li>Unicast or broadcast.</li>
<li>Reliable or best-effort.</li>
</ul>
<p><strong>Notes</strong></p>
<ul>
<li>MQTT uses <strong>shared queues</strong> to implement unicast.</li>
<li>AMQP uses <strong>confirm channels</strong> to implement reliable publish, and MQTT uses <strong>QoS 1</strong> to
implement reliable publish/subscribe.</li>
</ul>
<h1>Relationships of Connections and Queues</h1>
<p>The term <strong>connection</strong> describes a TCP/TLS connection to the message broker.
The term <strong>queue</strong> describes a message queue or a topic within a connection.
You can use one connection to manage multiple queues, or one connection to manage one queue.</p>
<p>A queue can only be a receiver or a sender at a time.</p>
<h3>Connections for sender/receiver queues with the same name</h3>
<p>The sender and the receiver are usually different programs, there are two connections to hold two
queues.</p>
<p>For the special case that a program acts both the sender and the receiver using the same queue:</p>
<ul>
<li>The AMQP implementation uses one <strong>Channel</strong> for one queue, so the program can manages all
queues with one connection.</li>
<li>The MQTT implementation <strong>MUST</strong> uses one connection for one queue, or both sender and receiver
will receive packets.</li>
</ul>
<h1>Test</h1>
<p>Please prepare a <a href="https://www.rabbitmq.com/">RabbitMQ</a> broker and a <a href="https://emqx.io/">EMQX</a>
broker at <strong>localhost</strong> for testing.</p>
<ul>
<li>
<p>To install using Docker:</p>
<pre><code>$ docker run --rm --name rabbitmq -d -p 5672:5672 rabbitmq:management-alpine
$ docker run --rm --name emqx -d -p 1883:1883 emqx/emqx
</code></pre>
</li>
</ul>
<p>Then run the test:</p>
<pre><code>$ npm run test
</code></pre>
<h1>Example</h1>
<p>Launch RabbitMQ and then run AMQP example:</p>
<pre><code>$ node examples/simple.js
</code></pre>
<p>Launch EMQX and then run MQTT example:</p>
<pre><code>$ RUN_MQTT= node examples/simple.js
</code></pre></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AmqpConnection.html">AmqpConnection</a></li><li><a href="AmqpQueue.html">AmqpQueue</a></li><li><a href="MqttConnection.html">MqttConnection</a></li><li><a href="MqttQueue.html">MqttQueue</a></li></ul><h3>Events</h3><ul><li><a href="AmqpConnection.html#event:error">error</a></li><li><a href="AmqpConnection.html#event:status">status</a></li><li><a href="AmqpQueue.html#event:error">error</a></li><li><a href="AmqpQueue.html#event:status">status</a></li><li><a href="MqttConnection.html#event:error">error</a></li><li><a href="MqttConnection.html#event:status">status</a></li><li><a href="MqttQueue.html#event:error">error</a></li><li><a href="MqttQueue.html#event:status">status</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DataTypes">DataTypes</a></li><li><a href="global.html#Errors">Errors</a></li><li><a href="global.html#Events">Events</a></li><li><a href="global.html#Status">Status</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Fri Dec 20 2024 14:07:11 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>